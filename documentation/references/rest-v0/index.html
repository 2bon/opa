<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>REST API (V0) | OPA</title> <meta name="description" content="OPA: An open source project to policy-enable your service."> <link type="text/css" rel="stylesheet" href="/assets/style.css"> </head> <body> <nav> <ul class="opa-nav-main--list"> <li class="opa-nav-main--home-item"> <a class="opa-nav-main--link" href="/">Open Policy Agent</a> </li> <li class="opa-nav-main--item"> <a class="opa-nav-main--link" href="/get-opa/">Get OPA</a> </li> <li class="opa-nav-main--item--selected"> Documentation </li> <li class="opa-nav-main--item"> <a class="opa-nav-main--link" href="/tutorials/working-with-the-opa-repl/">Tutorials</a> </li> <li class="opa-nav-main--item"> <a class="opa-nav-main--link" href="/community/">Community</a> </li> <li class="opa-nav-main--item"> <a class="opa-nav-main--link" href="https://blog.openpolicyagent.org">Blog</a> </li> </ul> </nav> <header class="opa-header"> <p class="opa-header--fork-me"><a href="https://github.com/open-policy-agent/opa"><img src="/assets/github-corner-right.svg" alt="Fork me on GitHub" width="80" height="80"></a></p> <div class="opa-content"> <div class="opa-header--abstract"> <nav class="opa-header--abstract--nav"> <ul class="opa-header--abstract--nav-list"> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/what-is-policy-enablement/">What is Policy Enablement?</a> </li> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/how-does-opa-work/">How Does OPA Work?</a> </li> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/how-do-i-write-policies/">How Do I Write Policies?</a> </li> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/references/language/">Language Reference</a> </li> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/references/rest-v1/">REST API (V1)</a> </li> <li class="opa-header--abstract--nav-item--selected"> REST API (V0) </li> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/references/deployments/">Deployments</a> </li> <li class="opa-header--abstract--nav-item"> <a class="opa-header--abstract--nav-link" href="/documentation/references/security/">Security</a> </li> </ul> </nav> <h1>REST API (V0)</h1> <p>This document is the authoritative specification of the OPA REST API (V0). The V0 API represents the simplest way to evaluate policies.</p> <p>Use the V0 API if you are enforcing policy decisions via webhooks that have pre-defined request/response formats that are incompatible with the <a href="../rest-v1">V1 API</a>.</p> <p>The V0 API does not support policy management, ad-hoc queries, or higher-order functionality on Data API queries such as profiling or explanations.</p> </div> </div> </header> <div class="opa-content"> <h2><a name="data-api"></a> Data API</h2> <p>The Data API exposes endpoints for reading and writing documents in OPA. For an introduction to the different types of documents in OPA see <a href="../../how-does-opa-work/">How Does OPA Work?</a>.</p> <h3>Get a Document</h3> <div class="highlighter-rouge"><pre class="highlight"><code>POST /v0/data/{path:.+}
Content-Type: application/json
</code></pre> </div> <p>Get a document.</p> <p>The request message body defines the content of the <a href="../../how-does-opa-work#the-input-document">The input Document</a>. The request message body may be empty. The path separator is used to access values inside object and array documents.</p> <p>The examples below assume the following policy:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">package</span> <span class="n">opa</span><span class="p">.</span><span class="nf">examples</span>

<span class="n">import</span> <span class="n">input</span><span class="p">.</span><span class="nf">example</span><span class="p">.</span><span class="nf">flag</span>

<span class="n">allow_request</span> <span class="p">{</span> <span class="n">flag</span> <span class="o">=</span> <span class="kp">true</span> <span class="p">}</span>
</code></pre> </div> <h4>Example Request</h4> <div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/v0/data/opa/examples/allow_request</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre> </div> <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"example"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"flag"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> </div> <h4>Example Response</h4> <div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre> </div> <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="kc">true</span><span class="w">
</span></code></pre> </div> <h4>Query Parameters</h4> <ul> <li><strong>pretty</strong> - If parameter is <code class="highlighter-rouge">true</code>, response will formatted for humans.</li> </ul> <h4>Status Codes</h4> <ul> <li><strong>200</strong> - no error</li> <li><strong>400</strong> - bad request</li> <li><strong>404</strong> - not found</li> <li><strong>500</strong> - server error</li> </ul> <p>If the requested document is missing or undefined, the server will return 404 and the message body will contain an error object.</p> <h2>Authentication</h2> <p>The V0 API supports the same authentication methods as the V1 API. See the See the <a href="../rest-v1#authentication">Authentication section of the V1 API</a> for more details.</p> <h2>Errors</h2> <p>The V0 API supports the same error format as the V1 API. See the <a href="../rest-v1#errors">Errors section of the V1 API</a> for more details.</p> </div> <footer class="opa-footer"> <p class="opa-footer--text"> <a class="opa-footer--github--link" href="https://github.com/open-policy-agent/opa"><img src="/assets/icon-github.svg" class="opa-footer--github--icon" width="16" height="16" alt="icon-github.svg">open-policy-agent/opa</a> <a href="https://travis-ci.org/open-policy-agent/opa"><img class="opa-footer--github--ci" width="90" height="20" src="https://travis-ci.org/open-policy-agent/opa.svg?branch=master" alt="Build Status"></a> </p> <p class="opa-footer--text"> Join the discussion on <a class="opa-footer--link" href="http://slack.openpolicyagent.org">Slack</a> or <a class="opa-footer--link" href="https://groups.google.com/forum/?hl=en#!forum/open-policy-agent">Google Groups</a>. Report a bug or request a feature using <a class="opa-footer--link" href="https://github.com/open-policy-agent/opa/issues">GitHub Issues</a>. </p> <p class="opa-footer--text"> Â© 2016 Open Policy Agent contributors. Licensed under the <a class="opa-footer--link" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. For information about contributing, see <a class="opa-footer--link" href="https://github.com/open-policy-agent/opa/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>. </p> </footer> <script>var OPA_COLLAPSE_CONFIG={classNames:"highlight",baseClassName:"opa-collapse",collapsedClassName:"opa-collapse--collapsed",ignoreClassName:"opa-collapse--ignore",maxHeight:320,targetClassName:"opa-collapse--target"};</script> <script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-84550302-1","auto"),ga("send","pageview");</script> <script type="text/javascript" src="/assets/dom.js"></script> <script type="text/javascript" src="/assets/collapse.js"></script> </body> </html>